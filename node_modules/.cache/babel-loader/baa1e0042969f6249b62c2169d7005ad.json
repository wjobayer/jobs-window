{"ast":null,"code":"import _objectSpread from\"C:/project/pearls/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/project/pearls/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createUserWithEmailAndPassword,getAuth,GoogleAuthProvider,onAuthStateChanged,signInWithEmailAndPassword,signInWithPopup,signOut,updateProfile}from'firebase/auth';import{useEffect,useState}from\"react\";import initializeAuthentication from'./firebase.init';initializeAuthentication();var useFirebase=function useFirebase(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),admin=_useState6[0],setAdmin=_useState6[1];var auth=getAuth();var googleProvider=new GoogleAuthProvider();useEffect(function(){var unsubscribe=onAuthStateChanged(auth,function(user){console.log(user);if(user){setUser(user);}else{setUser({});}setIsLoading(false);});return function(){return unsubscribe();};},[]);var signInWithGoogle=function signInWithGoogle(){return signInWithPopup(auth,googleProvider);};var createAccountWithGoogle=function createAccountWithGoogle(email,password){return createUserWithEmailAndPassword(auth,email,password);};var loginWithEmailAndPassword=function loginWithEmailAndPassword(email,password){return signInWithEmailAndPassword(auth,email,password);};var updateName=function updateName(name){updateProfile(auth.currentUser,{displayName:name}).then(function(){var newUser=_objectSpread(_objectSpread({},user),{},{displayName:name});// recommend\nsetUser(newUser);// ...\n}).catch(function(error){// An error occurred\n// ...\n});};useEffect(function(){fetch(\"https://aqueous-falls-64682.herokuapp.com/addUserInfo/\".concat(user.email)).then(function(res){return res.json();}).then(function(data){return setAdmin(data.admin);});},[user.email]);var logOut=function logOut(){console.log(\"logout\");signOut(auth).then(function(){setUser({});}).catch(function(error){// An error happened.\n});};//  console.log(user.email);\nvar hanldeUserInfoRegister=function hanldeUserInfoRegister(email,name){fetch(\"https://aqueous-falls-64682.herokuapp.com/addUserInfo\",{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify({email:email,name:name})}).then(function(res){return res.json();}).then(function(result){return console.log(result);});};return{user:user,setUser:setUser,admin:admin,signInWithGoogle:signInWithGoogle,createAccountWithGoogle:createAccountWithGoogle,loginWithEmailAndPassword:loginWithEmailAndPassword,isLoading:isLoading,setIsLoading:setIsLoading,logOut:logOut,updateName:updateName,auth:auth,hanldeUserInfoRegister:hanldeUserInfoRegister};};export default useFirebase;","map":{"version":3,"sources":["C:/project/pearls/src/Web/Firebase/useFirebase.js"],"names":["createUserWithEmailAndPassword","getAuth","GoogleAuthProvider","onAuthStateChanged","signInWithEmailAndPassword","signInWithPopup","signOut","updateProfile","useEffect","useState","initializeAuthentication","useFirebase","user","setUser","isLoading","setIsLoading","admin","setAdmin","auth","googleProvider","unsubscribe","console","log","signInWithGoogle","createAccountWithGoogle","email","password","loginWithEmailAndPassword","updateName","name","currentUser","displayName","then","newUser","catch","error","fetch","res","json","data","logOut","hanldeUserInfoRegister","method","headers","body","JSON","stringify","result"],"mappings":"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","sourcesContent":["import { createUserWithEmailAndPassword, getAuth, GoogleAuthProvider, onAuthStateChanged, signInWithEmailAndPassword, signInWithPopup, signOut, updateProfile } from 'firebase/auth';\r\nimport { useEffect, useState } from \"react\";\r\nimport initializeAuthentication from './firebase.init';\r\ninitializeAuthentication();\r\n\r\nconst useFirebase = () => {\r\n  \r\n  const [user , setUser]=useState({})\r\n  const [isLoading , setIsLoading] =useState(true);\r\n  const [admin, setAdmin] = useState(false);\r\n  const auth = getAuth()\r\n  const googleProvider= new GoogleAuthProvider();\r\n\r\n\r\nuseEffect(() =>{\r\n     const unsubscribe = onAuthStateChanged(auth , (user)=> {\r\n        console.log(user);\r\n          if(user){\r\n               \r\n              setUser(user)\r\n          } else{\r\n              setUser({})\r\n          }\r\n          setIsLoading(false)\r\n     })\r\n      return ()=> unsubscribe()\r\n},[])\r\n \r\n\r\n  const signInWithGoogle=()=> {\r\n   return  signInWithPopup(auth, googleProvider)\r\n \r\n  }\r\n\r\n\r\nconst  createAccountWithGoogle =(email , password)=> {\r\n\r\n    return createUserWithEmailAndPassword(auth, email, password)\r\n}\r\n\r\n\r\nconst loginWithEmailAndPassword =(email,password)=> {\r\n    return signInWithEmailAndPassword(auth, email, password)\r\n}\r\n    \r\n\r\nconst updateName= (name)=> {\r\n  updateProfile(auth.currentUser, {\r\n    displayName: name\r\n  }).then(() => {\r\n    const newUser={...user, displayName: name} // recommend\r\n   setUser(newUser)\r\n    \r\n    // ...\r\n  }).catch((error) => {\r\n    // An error occurred\r\n    // ...\r\n  });\r\n}\r\n  useEffect(()=>{\r\n    fetch(`https://aqueous-falls-64682.herokuapp.com/addUserInfo/${user.email}`)\r\n    .then(res=>res.json())\r\n    .then(data=>setAdmin(data.admin))\r\n  },[user.email])\r\n\r\n\r\n const logOut=()=> {\r\n     console.log(\"logout\");\r\n    signOut(auth).then(() => {\r\n        setUser({})\r\n      }).catch((error) => {\r\n        // An error happened.\r\n      });\r\n }\r\n//  console.log(user.email);\r\n const hanldeUserInfoRegister = (email,name) => {\r\n  fetch(\"https://aqueous-falls-64682.herokuapp.com/addUserInfo\", {\r\n    method: \"POST\",\r\n    headers: { \"content-type\": \"application/json\" },\r\n    body: JSON.stringify({ email,name }),\r\n  })\r\n    .then((res) => res.json())\r\n    .then((result) => console.log(result));\r\n};\r\n\r\n    return {\r\n       user,\r\n       setUser,\r\n       admin,\r\n       signInWithGoogle,\r\n       createAccountWithGoogle,\r\n       loginWithEmailAndPassword,\r\n       isLoading,\r\n       setIsLoading,\r\n       logOut,\r\n       updateName,\r\n       auth,\r\n       hanldeUserInfoRegister\r\n       \r\n    }\r\n}\r\n\r\nexport default useFirebase;"]},"metadata":{},"sourceType":"module"}